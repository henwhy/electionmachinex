<!DOCTYPE html>
<html>
<head>
<meta charset="ISO-8859-1">
<title>Edit question</title>
</head>
<body>
	<div id="container">
	<h1>Edit question</h1>
	
	<p id="debug">Debug here</p>
	
	<form id="questionForm" onsubmit="return false;">
		QustionId: <input type="text" name="kid" id="form_questionId"><br>
		Edit question:<br> 
		<textarea name="form_edit" rows="4" cols="50" id="form_question" placeholder="Choose the question ID above, and edit it here"></textarea>
	</form>
	
	<button onclick="editquestion();">Save changes</button>
	
	<button onclick="removequestion();">Remove question</button>
	
	<button id="indexBtn">Home page</button>
	
<table id="table">

</table>
</div>
<script>

var btn = document.getElementById('indexBtn');
btn.addEventListener('click', function() {
	 document.location.href = 'index.html';
});

function readAll(){
	var xhttp = new XMLHttpRequest();

     xhttp.onreadystatechange = function() {
		 if (this.readyState == 4 && this.status == 200) {
			 var returned = JSON.parse(this.responseText);
			 var z="";
			 for (i=0;i<returned.length;i++){
				 var returnedTable=returned[i];
				 z=z+"<tr><td>"+y.questionId+"<td>"+returnedTable.question;
			 }
			document.getElementById("table").innerHTML = z;
			 
		 }
	 };

	xhttp.open("GET",
			"./vaalikonejparest/vaalikonejpaservice/etsikysymykset",
			true);
	//      xhttp.setRequestHeader("Content-type","text/plain");
	xhttp.setRequestHeader("Content-type", "application/json");
	//      xmlhttp.setRequestHeader("Data-type","json");
	xhttp.send();
	
}
readAll();

function editQuestions() {
  	 
	var form=document.getElementById("questionForm");
    var question = new Object();
    question.questionId = form.form_questionId.value;
    question.question = form.form_question.value;

    var jsonQuestion = JSON.stringify(question);
/*      document.getElementById("yksia").innerHTML = jsonElain;
    document.getElementById("yksib").innerHTML = JSON.stringify(jsonElain); */

    var xhttp = new XMLHttpRequest();

     xhttp.onreadystatechange = function() {
        if (this.readyState == 4 && this.status == 200) {
            document.getElementById("ihavenoideawhatimdoing").innerHTML = this.responseText;
/*              document.getElementById("osina").innerHTML = "ID="
                    + palautettu.id + " koko=" + palautettu.paino
                    + " Rotu=" + palautettu.laji; */
        }
    }; 

    xhttp.open("POST", "./vaalikonejparest/vaalikonejpaservice/muokkaakysymys", true);
    //      xhttp.setRequestHeader("Content-type","text/plain");
    xhttp.setRequestHeader("Content-type", "application/json");
    //      xmlhttp.setRequestHeader("Data-type","json");
    xhttp.send(jsonQuestion);
}

function removeQuestion() {
	var del = document.getElementById("questionForm").form_questionId.value;
	var url="./vaalikonejparest/vaalikonejpaservice/poistakysymys/" + del;
    
	var xhttp = new XMLHttpRequest();
	 
    xhttp.onreadystatechange = function() {
       if (this.readyState == 4 && this.status == 200) {
           document.getElementById("debug").innerHTML = this.responseText;
       }
   }; 

   xhttp.open("POST", url, true);
   xhttp.send();
   setTimeout(function(){
	   show()
   }, 1000);

}
</script>
</body>
</html>